<!doctype html>
<html lang="ja">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <title>KG Dashboard</title>

    <!-- Bootstrap core CSS -->
    <link href=https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta1/dist/css/bootstrap.min.css rel="stylesheet"
        integrity="sha384-giJF6kkoqNQ00vy+HMDP7azOuL0xtbfIcaT9wjKHr8RbDVddVHyTfAAsrekwKmP1" crossorigin="anonymous">
    <!-- FontAwesome -->
    <script src="https://kit.fontawesome.com/a5c7d26532.js" crossorigin="anonymous"></script>
    <!-- chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- ?? plugin doughnutlabel v2.0.3
    <script src="script/chartjs-plugin-doughnutlabel.min.js"></script>
    -->

    <!-- myLibrary -->
    <script src="./script/std_ui.js"></script>
    <script src="./script/std_array.js"></script>

    <!-- XP.css -->
    <link id="themeCSS" rel="stylesheet" href="https://unpkg.com/7.css" type="text/css">
    <style>

    </style>
    <script>
        // XMLコントロール
        function getXML(dataPath, f, credentials = true) {
            const request = new XMLHttpRequest(); // HTTPでファイルを読み込む
            request.open('GET', dataPath, true); // csvのパスを指定,非同期設定
            request.withCredentials = credentials;  // 
            request.send();
            request.addEventListener('load', (event) => { // ロードさせ実行
                const response = event.target.responseText; // 受け取ったテキストを返す
                f(response);  // コールバック関数
            });
        }
    </script>
</head>

<body style="background-repeat:none;background-size:cover;background-attachment: fixed;">
    <header class="navbar navbar-dark sticky-top bg-dark flex-md-nowrap p-0 shadow">
        <a class="navbar-brand col-md-3 col-lg-2 px-3" href="#">KG Dashboard</a>
        <button class="navbar-toggler position-absolute d-md-none collapsed" type="button" data-bs-toggle="collapse"
            data-bs-target="#sidebarMenu" aria-controls="sidebarMenu" aria-expanded="false"
            aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <ul class="navbar-nav px-3">
            <li class="nav-item text-nowrap">
                <a class="nav-link" href="#">サインアウト</a>
            </li>
        </ul>
    </header>
    <div class="container-fluid">
        <div class="row">
            <!-- メニュー検討：https://copypet.jp/2139/ -->
            <div class="d-none d-md-block col-3 col-lg-2">
                <nav style="background:#ffcccc">a</nav>
            </div>
            <main class="col">
                <div class="row p-2 g-2">
                    <div class="col-6 border border-dark">ew</div>
                    <div class="col-6 text-center border border-dark">
                        <canvas id="暑さ指数ゲージ"></canvas>

                        <script src="./lib/gauge.min.js"></script>
                        <script>
                            // https://www.cssscript.com/customizable-gauge-canvas/
                            function setGage(r) {
                                console.log("GET!");
                                // 暑さ指数取得
                                console.log(CSV2json(r));
                                // ゲージ作図
                                let canvas = document.getElementById("暑さ指数ゲージ");
                                let gauge = new Gauge(canvas).setOptions({
                                    // options
                                    colorStart: "#",
                                    colorStop: void 0,
                                    gradientType: 0,
                                    strokeColor: "#e0e0e0",
                                    generateGradient: true,
                                    percentColors: [
                                        [0.0, "#a0d2ff"],
                                        [0.5, "#faf500"],
                                        [0.56, "#ff9600"],
                                        [0.62, "#ff2800"]
                                    ],
                                    // customize pointer
                                    pointer: {
                                        length: 0.5,
                                        strokeWidth: 0.035,
                                        iconScale: 1.0
                                    },
                                    // static labels
                                    staticLabels: {
                                        font: "10px sans-serif",
                                        labels: [10, 20, 25, 28, 31, 40, 50],
                                        fractionDigits: 0
                                    },
                                    // static zones
                                    staticZones: [
                                        { strokeStyle: "#218cff", min: 0, max: 21 },
                                        { strokeStyle: "#a0d2ff", min: 21, max: 25 },
                                        { strokeStyle: "#faf500", min: 25, max: 28 },
                                        { strokeStyle: "#ff9600", min: 28, max: 31 },
                                        { strokeStyle: "#ff2800", min: 31, max: 50 }
                                    ],
                                    // render ticks
                                    renderTicks: {
                                        divisions: 5,
                                        divWidth: 1.8,
                                        divLength: 0.5,
                                        divColor: "#333333",
                                        subDivisions: 5,
                                        subLength: 0.2,
                                        subWidth: 0.5,
                                        subColor: "#333333"
                                    },
                                    // the span of the gauge arc
                                    angle: 0.05,
                                    // line thickness
                                    lineWidth: 0.44,
                                    // radius scale
                                    radiusScale: 0.8,
                                    // font size
                                    fontSize: 40,
                                    // if false, max value increases automatically if value > maxValue
                                    limitMax: false,
                                    // if true, the min value of the gauge will be fixed
                                    limitMin: false,
                                    // High resolution support
                                    highDpiSupport: true
                                });
                                gauge.maxValue = 50.0;
                                gauge.setMinValue(0);
                                gauge.set(25);
                                gauge.animationSpeed = 64;
                            }
                        //getXML("http://www.wbgt.env.go.jp/prev15WG/dl/yohou_43241.csv", );
                            /*
                            fetch("https://www.wbgt.env.go.jp/prev15WG/dl/yohou_43241.csv", {
                                "method": 'GET',
                                "mode": 'cors', // CORSモード
                                "credentials": 'include',
                                headers: {
                                    "Access-Control-Allow-Origin": "https://www.wbgt.env.go.jp"
                                }
                            });
                            */
                        </script>

                    </div>
                    <div class="col-6 border border-dark">

                    </div>

                    <!-- setting -->
                    <div class="col-12 col-md-6">
                        <div class="window glass">
                            <div class="title-bar">
                                <div class="title-bar-text">Settings</div>
                                <div class="title-bar-controls">
                                    <button aria-label="Minimize"></button>
                                    <button aria-label="Maximize"></button>
                                    <button aria-label="Close"></button>
                                </div>
                            </div>
                            <div class="window-body">
                                <div class="tab">
                                    <menu role="tablist">
                                        <button role="tab" aria-selected="true"
                                            aria-controls="settings_theme">Theme</button>
                                        <button role="tab" aria-controls="settings_Author">Author</button>
                                    </menu>
                                    <article role="tabpanel" id="settings_theme">
                                        <form>
                                            <fieldset>
                                                <legend style="float:none;width:auto;font-size:inherit;">各種設定</legend>
                                                <p>テーマ
                                                    <select id="settings_theme_form">
                                                        <option>7</option>
                                                        <option>XP</option>
                                                        <option>98</option>
                                                    </select>
                                                </p>
                                                <p>壁紙
                                                    <select id="settings_theme_form_wallpaper" style="max-width:100%;">
                                                        <option value="なし">なし</option>
                                                    </select><br />
                                                    <input type="checkbox" id="settings_theme_form_WPrandom">
                                                    <label for="settings_theme_form_WPrandom">ランダムで変更(30sec)</label>
                                                <div id="wallpaperInfo"></div>
                                                </p>
                                            </fieldset>
                                        </form>
                                        <div role="progressbar" id="settings_theme_progressbar" class="marquee d-none">
                                        </div>
                                        <script src="./script/theme.js"></script>
                                        <p class="d-none">※本設定にはCookieを使用する予定です。</p>
                                    </article>
                                    <article role="tabpanel" hidden id="settings_Author">
                                        修正依頼、機能要望はこちらまで。<br />
                                        <button onclick="window.open('https://github.com/Zacky0922/KG')"><i
                                                class="fab fa-github"></i> Source on
                                            GitHub</button>
                                    </article>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- 折角の背景が見えるように -->
                    <div class="col-12" style="height:99vh"></div>
                </div>
            </main>
        </div>
    </div>
</body>

</html>